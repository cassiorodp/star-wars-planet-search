(this.webpackJsonpstar_wars_planet_search=this.webpackJsonpstar_wars_planet_search||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/pixel-gif.833dad69.gif"},function(e,t,a){e.exports=a(21)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(9),c=a.n(l),u=(a(16),Object(n.createContext)()),i=a(2),o=["population","orbital_period","diameter","rotation_period","surface_water"],s=["name","terrain","gravity","climate","population","orbital_period","diameter","rotation_period","surface_water"],m=a(10),f=a.n(m);a(17);var d=function(){var e=Object(n.useContext)(u),t=e.handleFilterByName,a=e.handleFilterByNumericValues,l=e.handleSortPlanets,c=e.filter.filters.filterByNumericValues,m=Object(n.useState)("population"),d=Object(i.a)(m,2),b=d[0],p=d[1],v=Object(n.useState)("bigger then"),j=Object(i.a)(v,2),E=j[0],O=j[1],h=Object(n.useState)("0"),y=Object(i.a)(h,2),N=y[0],g=y[1],B=Object(n.useState)("name"),C=Object(i.a)(B,2),w=C[0],S=C[1],k=Object(n.useState)("ASC"),F=Object(i.a)(k,2),V=F[0],x=F[1],_=Object(n.useState)(o),I=Object(i.a)(_,2),A=I[0],P=I[1],q=Object(n.useState)(s),L=Object(i.a)(q,2),D=L[0],J=L[1];return Object(n.useEffect)((function(){var e=c.map((function(e){return e.column}));P(o.filter((function(t){return!e.includes(t)}))),J(s.filter((function(t){return!e.includes(t)})))}),[c]),r.a.createElement("section",{className:"main-container"},r.a.createElement("img",{src:f.a,alt:"millenium falcon gif"}),r.a.createElement("p",null,r.a.createElement("i",null,"Lets go, Chewie")),r.a.createElement("form",{className:"form-container"},r.a.createElement("label",{htmlFor:"planet-name"},"Name:",r.a.createElement("input",{"data-testid":"name-filter",onChange:function(e){return t(e.target.value)},type:"text",id:"planet-name",placeholder:"Eg: Tatooine"})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"column-filter"},"Filter by column:",r.a.createElement("select",{id:"column-filter",value:b,"data-testid":"column-filter",onChange:function(e){return p(e.target.value)}},A.map((function(e){return r.a.createElement("option",{value:e,key:e},e)})))),r.a.createElement("select",{value:E,"data-testid":"comparison-filter",onChange:function(e){return O(e.target.value)}},r.a.createElement("option",{value:"bigger then"},"bigger then"),r.a.createElement("option",{value:"less then"},"less then"),r.a.createElement("option",{value:"equal to"},"equal to")),r.a.createElement("input",{type:"number",required:!0,"data-testid":"value-filter",onChange:function(e){return g(e.target.value)}}),r.a.createElement("button",{onClick:function(){return a(b,E,N)},type:"button","data-testid":"button-filter"},"Filter!")),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"column-sort"},"Sort by column:",r.a.createElement("select",{"data-testid":"column-sort",onChange:function(e){return S(e.target.value)}},D.map((function(e){return r.a.createElement("option",{value:e,key:e},e)})))),r.a.createElement("label",{htmlFor:"upward"},"Upward:",r.a.createElement("input",{"data-testid":"column-sort-input-asc",id:"upward",type:"radio",name:"order",value:"ASC",defaultChecked:!0,onClick:function(e){return x(e.target.value)}})),r.a.createElement("label",{htmlFor:"downward"},"Downward:",r.a.createElement("input",{"data-testid":"column-sort-input-desc",id:"downward",type:"radio",name:"order",value:"DESC",onClick:function(e){return x(e.target.value)}})),r.a.createElement("button",{onClick:function(){return l(w,V)},"data-testid":"column-sort-button",type:"button"},"Sort!"))))};a(18);var b=function(){var e=Object(n.useContext)(u),t=e.filter.filters.filterByNumericValues,a=e.handleRemoveFilter;return r.a.createElement("div",null,r.a.createElement(r.a.Fragment,null,t.map((function(e){var t=e.comparison,n=e.column,l=e.value;return r.a.createElement("div",{className:"selected-filter",key:n,"data-testid":"filter"},r.a.createElement("p",null,"Column: ".concat(n)),r.a.createElement("p",null,"Comparison: ".concat(t)),r.a.createElement("p",null,"Value: ".concat(l)),r.a.createElement("button",{onClick:function(){return a(n)},type:"button"},"X"))}))))};a(19);var p=function(){var e=Object(n.useContext)(u),t=e.data.results,a=e.filter,l=Object(n.useState)([]),c=Object(i.a)(l,2),o=c[0],s=c[1],m=Object(n.useState)([]),f=Object(i.a)(m,2),d=f[0],b=f[1];return Object(n.useEffect)((function(){var e=o.map((function(e){return e.films.map((function(e){return fetch(e).then((function(e){return e.json()})).then((function(e){return e}))}))}));Promise.all(e.map((function(e){return Promise.all(e).then((function(e){return e}))}))).then((function(e){return b(e)}))}),[o]),Object(n.useEffect)((function(){var e=function(e){var t=a.filters.order,n=t.column,r=t.sort;return e.sort((function(e,t){var a=e[n],l=t[n];return Number.isNaN(Number(a))||(a=Number(a)),Number.isNaN(Number(l))||(l=Number(l)),a>l?"ASC"===r?1:Number("-1"):l>a?"ASC"===r?Number("-1"):1:0}))}(function(e){var t=a.filters.filterByNumericValues,n=[];return t.length?(t.forEach((function(t){var a=t.comparison,r=t.column,l=t.value;"bigger then"===a&&(n=e.filter((function(e){return parseInt(e[r],10)>parseInt(l,10)}))),"less then"===a&&(n=e.filter((function(e){return parseInt(e[r],10)<parseInt(l,10)}))),"equal to"===a&&(n=e.filter((function(e){return parseInt(e[r],10)===parseInt(l,10)})))})),n):n=e}(function(){var e=a.filters.filterByName.name;return t.filter((function(t){return t.name.toLowerCase().includes(e)}))}()));s(e)}),[a]),r.a.createElement("table",{className:"planets-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,Object.keys(t[0]).map((function(e){return r.a.createElement("th",{key:e},e)})))),r.a.createElement("tbody",null,o.map((function(e,t){var a=Object.entries(e);return console.log(a),r.a.createElement("tr",{key:e.name},a.map((function(e){var a=Object(i.a)(e,2),n=a[0],l=a[1];return"films"===n&&d.length?r.a.createElement("td",{key:n},d[t].map((function(e){return r.a.createElement("p",{key:e.title},e.title)}))):r.a.createElement("td",{key:n},l)})))}))))};var v=function(){var e=Object(n.useContext)(u),t=e.data.results,a=e.loading;return r.a.createElement("div",null,a&&r.a.createElement("h1",null,"Loading..."),t[0]&&r.a.createElement(r.a.Fragment,null,r.a.createElement(d,null),r.a.createElement(b,null),r.a.createElement(p,null)))},j=a(4),E=a.n(j),O=a(7),h=a(5),y=a(1);var N=function(e){var t=e.children,a=Object(n.useState)({count:0,next:"",previous:null,results:[]}),l=Object(i.a)(a,2),c=l[0],o=l[1],s=Object(n.useState)(!0),m=Object(i.a)(s,2),f=m[0],d=m[1],b=Object(n.useState)({filters:{filterByName:{name:""},filterByNumericValues:[],order:{column:"name",sort:"ASC"}}}),p=Object(i.a)(b,2),v=p[0],j=p[1];Object(n.useEffect)((function(){(function(){var e=Object(O.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),"https://swapi-trybe.herokuapp.com/api/planets/",e.next=4,fetch("https://swapi-trybe.herokuapp.com/api/planets/");case 4:return e.next=6,e.sent.json();case 6:(t=e.sent).results.forEach(function(){var e=Object(O.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete t.residents,delete t.created,delete t.edited,delete t.url;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),d(!1),o(Object(y.a)(Object(y.a)({},t),{},{results:t.results}));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var N={data:c,loading:f,handleFilterByName:function(e){var t=v.filters,a=t.filterByName,n=t.filterByNumericValues,r=t.order;j(Object(y.a)(Object(y.a)({},v),{},{filters:{filterByName:Object(y.a)(Object(y.a)({},a),{},{name:e}),filterByNumericValues:Object(h.a)(n),order:Object(y.a)({},r)}}))},filter:v,handleFilterByNumericValues:function(e,t,a){var n=v.filters,r=n.filterByName,l=n.filterByNumericValues,c=n.order;j(Object(y.a)(Object(y.a)({},v),{},{filters:{filterByName:Object(y.a)({},r),filterByNumericValues:[].concat(Object(h.a)(l),[{column:e,comparison:t,value:a}]),order:Object(y.a)({},c)}}))},handleRemoveFilter:function(e){var t=v.filters,a=t.filterByName,n=t.filterByNumericValues,r=t.order,l=n.filter((function(t){var a=t.column;return e!==a}));j(Object(y.a)(Object(y.a)({},v),{},{filters:{filterByName:Object(y.a)({},a),filterByNumericValues:Object(h.a)(l),order:Object(y.a)({},r)}}))},handleSortPlanets:function(e,t){var a=v.filters,n=a.filterByName,r=a.filterByNumericValues;j(Object(y.a)(Object(y.a)({},v),{},{filters:{filterByName:Object(y.a)({},n),filterByNumericValues:Object(h.a)(r),order:{column:e,sort:t}}}))}};return r.a.createElement(u.Provider,{value:N},t)};var g=function(){return r.a.createElement(N,null,r.a.createElement(v,null))};c.a.render(r.a.createElement(g,null),document.getElementById("root"))}],[[11,1,2]]]);
//# sourceMappingURL=main.0b52a4b8.chunk.js.map